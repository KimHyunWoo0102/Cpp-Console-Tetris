#pragma once
#include <utility>

enum class BlockType {
	I=0,
	O,
	T,
	J,
	L,
	S,
	Z
};

const bool BLOCK_TEMPLATES[7][4][4][4] = {
    // --- 0: I_BLOCK (I) ---
    {
        {{0,0,0,0}, {1,1,1,1}, {0,0,0,0}, {0,0,0,0}}, // 0도
        {{0,0,1,0}, {0,0,1,0}, {0,0,1,0}, {0,0,1,0}}, // 90도
        {{0,0,0,0}, {0,0,0,0}, {1,1,1,1}, {0,0,0,0}}, // 180도
        {{0,1,0,0}, {0,1,0,0}, {0,1,0,0}, {0,1,0,0}}  // 270도
    },
    // --- 1: O_BLOCK (O) ---
    {
        {{0,1,1,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}}, // 0도
        {{0,1,1,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}}, // 90도
        {{0,1,1,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}}, // 180도
        {{0,1,1,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}}  // 270도
    },
    // --- 2: T_BLOCK (T) ---
    {
        {{0,1,0,0}, {1,1,1,0}, {0,0,0,0}, {0,0,0,0}}, // 0도
        {{0,1,0,0}, {0,1,1,0}, {0,1,0,0}, {0,0,0,0}}, // 90도
        {{0,0,0,0}, {1,1,1,0}, {0,1,0,0}, {0,0,0,0}}, // 180도
        {{0,1,0,0}, {1,1,0,0}, {0,1,0,0}, {0,0,0,0}}  // 270도
    },
    // --- 3: J_BLOCK (J) ---
    {
        {{1,0,0,0}, {1,1,1,0}, {0,0,0,0}, {0,0,0,0}}, // 0도
        {{0,1,1,0}, {0,1,0,0}, {0,1,0,0}, {0,0,0,0}}, // 90도
        {{0,0,0,0}, {1,1,1,0}, {0,0,1,0}, {0,0,0,0}}, // 180도
        {{0,1,0,0}, {0,1,0,0}, {1,1,0,0}, {0,0,0,0}}  // 270도
    },
    // --- 4: L_BLOCK (L) ---
    {
        {{0,0,1,0}, {1,1,1,0}, {0,0,0,0}, {0,0,0,0}}, // 0도
        {{0,1,0,0}, {0,1,0,0}, {0,1,1,0}, {0,0,0,0}}, // 90도
        {{0,0,0,0}, {1,1,1,0}, {1,0,0,0}, {0,0,0,0}}, // 180도
        {{1,1,0,0}, {0,1,0,0}, {0,1,0,0}, {0,0,0,0}}  // 270도
    },
    // --- 5: S_BLOCK (S) ---
    {
        {{0,1,1,0}, {1,1,0,0}, {0,0,0,0}, {0,0,0,0}}, // 0도
        {{0,1,0,0}, {0,1,1,0}, {0,0,1,0}, {0,0,0,0}}, // 90도
        {{0,0,0,0}, {0,1,1,0}, {1,1,0,0}, {0,0,0,0}}, // 180도
        {{1,0,0,0}, {1,1,0,0}, {0,1,0,0}, {0,0,0,0}}  // 270도
    },
    // --- 6: Z_BLOCK (Z) ---
    {
        {{1,1,0,0}, {0,1,1,0}, {0,0,0,0}, {0,0,0,0}}, // 0도
        {{0,0,1,0}, {0,1,1,0}, {0,1,0,0}, {0,0,0,0}}, // 90도
        {{0,0,0,0}, {1,1,0,0}, {0,1,1,0}, {0,0,0,0}}, // 180도
        {{0,1,0,0}, {1,1,0,0}, {1,0,0,0}, {0,0,0,0}}  // 270도
    }
};

struct Pos {
    int y;
    int x;
};

class Block {
public:
    Block() : type(BlockType::I), rotation(0), pos{ 0, 0 }
    {}

    void SpwanNewBlock(BlockType newType, Pos startPos) {
        this->type = newType;
        this->pos = startPos;
        this->rotation = 0;
    }

    int GetX() const;
    int GetY() const;
    const bool* GetShape()const;

    void MoveDown();
    void MoveRight();
    void MoveLeft();
    void Rotate();

private:
    BlockType type;
    int rotation;
    Pos pos;
};